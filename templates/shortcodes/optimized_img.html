{%- set colocated_path = page.colocated_path | default(value="") -%}
{%- set img_path = colocated_path ~ src -%}

{#- Generate multiple formats at two widths for responsive loading -#}
{%- set avif_sm = resize_image(path=img_path, width=400, height=0, op="fit_width", format="avif", quality=75) -%}
{%- set avif_lg = resize_image(path=img_path, width=800, height=0, op="fit_width", format="avif", quality=75) -%}
{%- set webp_sm = resize_image(path=img_path, width=400, height=0, op="fit_width", format="webp", quality=85) -%}
{%- set webp_lg = resize_image(path=img_path, width=800, height=0, op="fit_width", format="webp", quality=85) -%}
{%- set jpg_sm = resize_image(path=img_path, width=400, height=0, op="fit_width", format="jpg", quality=90) -%}
{%- set jpg_lg = resize_image(path=img_path, width=800, height=0, op="fit_width", format="jpg", quality=90) -%}

<picture>
  <source srcset="{{ avif_sm.url }} 400w, {{ avif_lg.url }} 800w" sizes="(max-width: 600px) 100vw, 800px"
    type="image/avif">
  <source srcset="{{ webp_sm.url }} 400w, {{ webp_lg.url }} 800w" sizes="(max-width: 600px) 100vw, 800px"
    type="image/webp">
  <img src="{{ jpg_lg.url }}" srcset="{{ jpg_sm.url }} 400w, {{ jpg_lg.url }} 800w"
    sizes="(max-width: 600px) 100vw, 800px" {% if alt %}alt="{{ alt }}" {% endif %} width="{{ jpg_lg.width }}"
    height="{{ jpg_lg.height }}" loading="lazy" decoding="async" style="max-width: 100%; height: auto; display: block;">
</picture>